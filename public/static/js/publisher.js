webpackJsonp([23],{fmNf:function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("mt-header",{attrs:{title:"主播"}},[i("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:e.back},slot:"left"},[i("span",[e._v("返回")])])],1),e._v(" "),i("mt-field",{attrs:{label:"推流地址",placeholder:"请输入拉流地址"},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}}),e._v(" "),i("mt-field",{attrs:{label:"stream",placeholder:"请输入stream"},model:{value:e.stream,callback:function(t){e.stream=t},expression:"stream"}}),e._v(" "),i("mt-field",{attrs:{label:"videoWidth",placeholder:"videoWidth"},model:{value:e.options.videoWidth,callback:function(t){e.$set(e.options,"videoWidth",t)},expression:"options.videoWidth"}}),e._v(" "),i("mt-field",{attrs:{label:"videoHeight",placeholder:"videoHeight"},model:{value:e.options.videoHeight,callback:function(t){e.$set(e.options,"videoHeight",t)},expression:"options.videoHeight"}}),e._v(" "),i("mt-field",{attrs:{label:"videoBitRate",placeholder:"videoBitRate"},model:{value:e.options.videoBitRate,callback:function(t){e.$set(e.options,"videoBitRate",t)},expression:"options.videoBitRate"}}),e._v(" "),i("mt-field",{attrs:{label:"videoMaxBitRate",placeholder:"videoMaxBitRate"},model:{value:e.options.videoMaxBitRate,callback:function(t){e.$set(e.options,"videoMaxBitRate",t)},expression:"options.videoMaxBitRate"}}),e._v(" "),i("mt-field",{attrs:{label:"videoMinBitRate",placeholder:"videoMinBitRate"},model:{value:e.options.videoMinBitRate,callback:function(t){e.$set(e.options,"videoMinBitRate",t)},expression:"options.videoMinBitRate"}}),e._v(" "),i("mt-field",{attrs:{label:"videoFrameRate",placeholder:"videoFrameRate"},model:{value:e.options.videoFrameRate,callback:function(t){e.$set(e.options,"videoFrameRate",t)},expression:"options.videoFrameRate"}}),e._v(" "),i("mt-field",{attrs:{label:"videoMaxKeyframeInterval",placeholder:"videoMaxKeyframeInterval"},model:{value:e.options.videoMaxKeyframeInterval,callback:function(t){e.$set(e.options,"videoMaxKeyframeInterval",t)},expression:"options.videoMaxKeyframeInterval"}}),e._v(" "),i("mt-field",{attrs:{label:"videoOrientation",placeholder:"videoOrientation"},model:{value:e.options.videoOrientation,callback:function(t){e.$set(e.options,"videoOrientation",t)},expression:"options.videoOrientation"}}),e._v(" "),i("div",{staticClass:"pd-md"},[i("mt-button",{attrs:{type:"primary",size:"large"},on:{click:e.start}},[e._v("开　播")])],1),e._v(" "),i("div",{staticClass:"pd-md"},[i("mt-button",{directives:[{name:"show",rawName:"v-show",value:null!=e.streamer,expression:"streamer != null"}],attrs:{type:"primary",size:"large"},on:{click:e.stop}},[e._v("停　播")])],1)],1)},a=[],s={render:o,staticRenderFns:a};t.a=s},mQRn:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i("yl8w"),a=i("fmNf"),s=i("C7Lr"),n=s(o.a,a.a,!1,null,null,null);t.default=n.exports},yl8w:function(e,t,i){"use strict";t.a={name:"Video",data:function(){return{url:"rtmp://47.100.119.102:1935/hls",stream:"chenjia",streamer:null,options:{videoWidth:"375",videoHeight:"667",videoBitRate:"819200",videoMaxBitRate:"1024000",videoMinBitRate:"512000",videoFrameRate:"24",videoMaxKeyframeInterval:"48",videoOrientation:"1",labelLive:"Live",labelViewers:"Viewers",labelNoQuestions:"No Questions",alertStopSessionTitle:"结束提醒",alertStopSessionYes:"确定",alertStopSessionNo:"取消",alertStopSessionMessage:"要关闭直播间吗?",alertStartSessionTitle:"开播提醒",alertStartSessionOK:"确定",alertStartSessionMessage:"请点击下方红色按钮开启直播！",videoTitleStart:"开始",videoTitlePaused:"暂停",videoTitleEnd:"结束"}}},methods:{start:function(){/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?this.iosStart():/(Android)/i.test(navigator.userAgent)?this.androidStart():(alert("未能识别设备类型，默认用安卓！"),this.androidPlay())},stop:function(){/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?this.iosStop():/(Android)/i.test(navigator.userAgent)?this.androidStop():alert("未能识别设备类型！")},androidStart:function(){window.videoStreamer.streamRTMP(this.url+"/"+this.stream,function(){console.log("success streamRTMP")},function(){console.log("failure streamRTMP")})},androidStop:function(){window.videoStreamer.streamStop(function(){console.log("success streamStop")},function(){console.log("failure streamStop")})},iosStart:function(){var e=Object.assign({},this.options);e.videoWidth=e.videoWidth||this.screenWidth,e.videoHeight=e.videoHeight||this.screenHeight,e.rtmpServerURL=this.url+"/"+this.stream,console.log(e,JSON.stringify(window.rtmpLiveStreamer)),this.streamer=window.rtmpLiveStreamer,this.streamer.start(function(e){console.log("Results: "+e)},function(e){console.log("Error: "+e)},e)},iosStop:function(){this.streamer.stop(function(e){console.log("Results: "+e)},function(e){console.log("Error: "+e)},null)}},watch:{},mounted:function(){}}}});